<!DOCTYPE html>

<html lang="en">

<head>
	<meta charset="utf-8">
	<title>jquery-pinterest</title>
	<style type="text/css">
		li {
			list-style: none;
			margin-bottom: 20px;
		}
	</style>
</head>

<body>

<ul>
	<li>
		<img src="img/slide-1.jpg" title="slide-1">
	</li>
	<li>
		<img src="img/slide-2.jpg" title="slide-2">
	</li>
	<li>
		<img src="img/slide-3.jpg" title="slide-3">
	</li>
	<li>
		<img src="img/slide-4.jpg" title="slide-4">
	</li>
	<li>
		<img src="img/slide-5.jpg" title="slide-5">
	</li>
</ul>

<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js"></script>
<script>
pinit('img');

function pinit(imgSelector/*='img'*/) {
	var
		pageUrl = window.location.href
	;
	
	$(window).load(function() {
		$(imgSelector).each(function(i, img) {
			var
				url = img.src,
				desc = img.title
			;
			$(img)
				.wrap(
					$('<div class="mg-container" style="position: relative;"></div>')
						.css({width: $(img).width(), height: $(img).height()})
				)
				.after(
					'<a  style="position: absolute; right: 2px; top: 2px;"' +
						'class="pin-it-button" ' +
						'count-layout="horizontal" ' + // where is the counter?
						'href="http://pinterest.com/pin/create/button/?' + 
							$.param({url: pageUrl,
								media: 'http://mgiulio.altervista.org/wp-content/uploads/2012/01/Playing-with-Open-Data-a-simple-viewer-for-DecoroUrbano.org_.jpg',//img.src,
								description: img.title
							}) +
						'">' + 
					'Pin It' +
					'</a>')
			;
		});
		
		var s = document.createElement("script");
		s.type = "text/javascript";
		s.async = true;
		if (window.location.protocol == "https:")
			s.src = "https://assets.pinterest.com/js/pinit.js";
		else
			s.src = "http://assets.pinterest.com/js/pinit.js";
		s.onload = function() { 
			$('.mg-container iframe').css({position: 'absolute', right: '2px', top: '2px'});
		};
		var x = document.getElementsByTagName("script")[0];
		x.parentNode.insertBefore(s, x);
	});
}

(function() {
	for(var e=[],c=document.getElementsByTagName("a"),b=0; b < c.length; b++)
		e.push(c[b]);
		
	for (; e.length > 0;) {
		c = e.pop();
		if (!(!c.className || c.className.indexOf("pin-it-button") < 0)) {
			var d=c.getAttribute("href");
			b={};
			d=d.slice(d.indexOf("?")+1).split("&");
			for(var a = 0; a < d.length; a++) {
				var g=d[a].split("=");
				b[g[0]]=g[1]
			}
			
			b.layout=c.getAttribute("count-layout");
			b.count=c.getAttribute("always-show-count");
			
			a="?";
			d = window.location.protocol + "//d3io1k5o0zdpqr.cloudfront.net/pinit.html";
			for (var f in b)
				if(b[f]){
					d += a +f + "=" + b[f];
					a="&"
				}
				
			a = document.createElement("iframe");
			a.setAttribute("src", d);
			a.setAttribute("scrolling","no");
			a.allowTransparency=true;
			a.frameBorder=0;
			a.style.border="none";
			if(b.layout=="none"){
				a.style.width="43px";
				a.style.height="20px"
			}
			else if(b.layout=="vertical"){
				a.style.width="43px";
				a.style.height="58px"
			} else{
				a.style.width="90px";
				a.style.height="20px"
			}
			
			c.parentNode.replaceChild(a,c)
		}
	}
})();

</script>

</body>
</html>